(function(t){function e(e){for(var o,r,u=e[0],s=e[1],i=e[2],d=0,l=[];d<u.length;d++)r=u[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);f&&f(e);while(l.length)l.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],o=!0,r=1;r<n.length;r++){var u=n[r];0!==a[u]&&(o=!1)}o&&(c.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},a={app:0},c=[];function u(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-0bf5708d":"5a91bf6a","chunk-1c33acb1":"35e14e2e","chunk-44c8b642":"8e2a19a2","chunk-5ae98e56":"0e77d326","chunk-77b77a6a":"557430cf"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-0bf5708d":1,"chunk-1c33acb1":1,"chunk-5ae98e56":1,"chunk-77b77a6a":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-0bf5708d":"0829a026","chunk-1c33acb1":"ba96a445","chunk-44c8b642":"31d6cfe0","chunk-5ae98e56":"ef15df53","chunk-77b77a6a":"ce0dc814"}[t]+".css",a=s.p+o,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var i=c[u],d=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(d===o||d===a))return e()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){i=l[u],d=i.getAttribute("data-href");if(d===o||d===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var o=e&&e.target&&e.target.src||a,c=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=o,delete r[t],f.parentNode.removeChild(f),n(c)},f.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){r[t]=0})));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var c=new Promise((function(e,n){o=a[t]=[e,n]}));e.push(o[2]=c);var i,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=u(t);var l=new Error;i=function(e){d.onerror=d.onload=null,clearTimeout(f);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}a[t]=void 0}};var f=setTimeout((function(){i({type:"timeout",target:d})}),12e4);d.onerror=d.onload=i,document.head.appendChild(d)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/notea/",s.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var f=d;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0311":function(t,e,n){"use strict";var o=n("1af8"),r=n.n(o);r.a},"034f":function(t,e,n){"use strict";var o=n("85ec"),r=n.n(o);r.a},"05e3":function(t,e,n){},"1af8":function(t,e,n){},"2b7c":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n("d3b7");var o=n("bc3a"),r=n.n(o),a=n("5c96");function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(o,c){var u={url:t,method:e,validateStatus:function(t){return t>=200&&t<300||400===t}};"get"===e.toLowerCase()?u.params=n:u.data=n,r()(u).then((function(t){200===t.status?o(t.data):(a["Message"].error(t.data.msg),c(t.data))})).catch((function(t){Object(a["Message"])({type:"error",message:"网络异常"}),c({msg:"网络异常"})}))}))}r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",r.a.defaults.baseURL="https://note-server.hunger-valley.com",r.a.defaults.withCredentials=!0},"49c2":function(t,e,n){"use strict";var o=n("2b7c"),r={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"};e["a"]={register:function(t){var e=t.username,n=t.password;return Object(o["a"])(r.REGISTER,"POST",{username:e,password:n})},login:function(t){var e=t.username,n=t.password;return Object(o["a"])(r.LOGIN,"POST",{username:e,password:n})},logout:function(){return Object(o["a"])(r.LOGOUT)},getInfo:function(){return Object(o["a"])(r.GET_INFO)}}},"56d7":function(t,e,n){"use strict";n.r(e);n("e623"),n("e379"),n("5dc8"),n("37e1");var o=n("2b0e"),r=n("5c96"),a=n.n(r),c=(n("0fae"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("sidebar"),n("router-view")],1)}),u=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"sidebar"}},[n("avatar"),n("div",{staticClass:"icons"},[n("router-link",{staticClass:"link",attrs:{to:"/note",title:"笔记"}},[n("i",{staticClass:"iconfont icon-note"})]),n("router-link",{staticClass:"link",attrs:{to:"/notebooks",title:"笔记本"}},[n("i",{staticClass:"iconfont icon-notebook"})]),n("router-link",{staticClass:"link",attrs:{to:"/trash",title:"回收站"}},[n("i",{staticClass:"iconfont icon-trash"})])],1),n("div",{staticClass:"logout"},[n("i",{staticClass:"iconfont icon-logout",on:{click:t.logout}})])],1)},i=[],d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{attrs:{title:t.username}},[t._v(t._s(t.slug))])},l=[],f=n("5530"),h=n("2f62"),b={data:function(){return{}},computed:Object(f["a"])({},Object(h["c"])(["slug","username"])),methods:Object(f["a"])({},Object(h["b"])(["checkLogin"])),created:function(){this.checkLogin({path:"/login"})}},p=b,m=(n("a1aa"),n("2877")),g=Object(m["a"])(p,d,l,!1,null,"47bff9fe",null),k=g.exports,v=n("49c2"),N={components:{avatar:k},methods:{logout:function(){var t=this;this.$confirm("是否要退出账号","注销操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){v["a"].logout().then((function(e){t.$store.commit("setUser"),t.$router.push("/login"),r["Message"].success(e.msg)}))}))}}},I=N,T=(n("0311"),Object(m["a"])(I,s,i,!1,null,"7bbc2593",null)),E=T.exports,A={name:"app",components:{sidebar:E}},w=A,O=(n("034f"),Object(m["a"])(w,c,u,!1,null,null,null)),y=O.exports,j=n("9483");Object(j["a"])("".concat("/notea/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("d3b7");var P=n("8c4f");o["default"].use(P["a"]);var C=[{path:"/",alias:"/notebooks",component:function(){return n.e("chunk-0bf5708d").then(n.bind(null,"0028"))}},{path:"/login",name:"Login",component:function(){return n.e("chunk-1c33acb1").then(n.bind(null,"578a"))}},{path:"/note",component:function(){return Promise.all([n.e("chunk-44c8b642"),n.e("chunk-77b77a6a")]).then(n.bind(null,"128e"))}},{path:"/trash",component:function(){return Promise.all([n.e("chunk-44c8b642"),n.e("chunk-5ae98e56")]).then(n.bind(null,"137e"))}}],D=new P["a"]({mode:"hash",base:"/notea/",routes:C}),L=D,S=(n("4de4"),n("7db0"),n("25f0"),n("4160"),n("ac1f"),n("5319"),n("159b"),n("2b7c")),_=n("53ca");function M(t){var e="object"===Object(_["a"])(t)?t:new Date(t),n=e.getTime(),o=Date.now(),r=o-n,a="";switch(!0){case r<6e4:a="刚刚";break;case r<36e5:a=Math.floor(r/6e4)+"分钟前";break;case r<864e5:a=Math.floor(r/36e5)+"小时前";break;default:a=Math.floor(r/864e5)+"天前"}return a}var B={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks/:id",DELETE:"/notebooks/:id"},G={getAll:function(){return new Promise((function(t,e){Object(S["a"])(B.GET).then((function(e){e.data=e.data.sort((function(t,e){return t.createdAt<e.createdAt})),e.data.forEach((function(t){t.createdAtfriendly=M(t.createdAt),t.updateAtfriendly=M(t.updateAt)})),t(e)})).catch((function(t){e(t)}))}))},updateNotebook:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:""},n=e.title,o=void 0===n?"":n;return Object(S["a"])(B.UPDATE.replace(":id",t),"PATCH",{title:o})},deleteNotebook:function(t){return Object(S["a"])(B.DELETE.replace(":id",t),"DELETE")},addNotebook:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:""},e=t.title,n=void 0===e?"":e;return new Promise((function(t,e){Object(S["a"])(B.ADD,"POST",{title:n}).then((function(e){e.data.createdAtFriendly=M(e.data.createdAt),e.data.F=M(e.data.updateAt),t(e)})).catch((function(t){e(t)}))}))}},x=(n("f395"),{notebooks:null,curBookId:null}),F={notebooks:function(t){return t.notebooks||[]},curBook:function(t){return Array.isArray(t.notebooks)?t.curBookId?t.curBookId?t.notebooks.find((function(e){return e.id.toString()===t.curBookId}))||{}:void 0:t.notebooks[0]:{}}},U={setNotebooks:function(t,e){t.notebooks=e.notebooks},addNotebook:function(t,e){t.notebooks.unshift(e.notebook)},updateNotebook:function(t,e){var n=t.notebooks.find((function(t){return t.id===e.notebookId}))||{};n.title=e.title},deleteNotebook:function(t,e){t.notebooks=t.notebooks.filter((function(t){return t.id!==e.notebookId}))},setCurBook:function(t,e){e.curBookId?t.curBookId=e.curBookId.toString():t.curBookId=void 0}},R={getNotebooks:function(t){var e=t.commit;return G.getAll().then((function(t){e("setNotebooks",{notebooks:t.data})}))},addNotebook:function(t,e){var n=t.commit;return G.addNotebook({title:e.title}).then((function(t){console.log(t),n("addNotebook",{notebook:t.data}),r["Message"].success(t.msg)}))},updateNotebook:function(t,e){var n=t.commit;return G.updateNotebook(e.notebookId,{title:e.title}).then((function(t){n("updateNotebook",{notebookId:e.notebookId,title:e.title}),r["Message"].success(t.msg)}))},deleteNotebook:function(t,e){var n=t.commit;return G.deleteNotebook(e.notebookId).then((function(t){n("deleteNotebook",{notebookId:e.notebookId}),r["Message"].success(t.msg)}))}},$={state:x,getters:F,mutations:U,actions:R},H=(n("d81d"),{GET:"/notes/from/:notebookId",ADD:"/notes/to/:notebookId",UPDATE:"/notes/:noteId",DELETE:"/notes/:noteId"}),q={getAll:function(t){var e=t.notebookId;return new Promise((function(t,n){Object(S["a"])(H.GET.replace(":notebookId",e)).then((function(e){e.data=e.data.map((function(t){return t.createdAtFriendly=M(t.createdAt),t.updatedAtFriendly=M(t.updatedAt),t})).sort((function(t,e){return t.updatedAt<e.updatedAt})),t(e)})).catch((function(t){n(t)}))}))},updateNote:function(t,e){var n=t.noteId,o=e.title,r=e.content;return Object(S["a"])(H.UPDATE.replace(":noteId",n),"PATCH",{title:o,content:r})},deleteNote:function(t){var e=t.noteId;return Object(S["a"])(H.DELETE.replace(":noteId",e),"DELETE")},addNote:function(t){var e=t.notebookId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"",content:""},o=n.title,r=void 0===o?"":o,a=n.content,c=void 0===a?"":a;return new Promise((function(t,n){Object(S["a"])(H.ADD.replace(":notebookId",e),"POST",{title:r,content:c}).then((function(e){e.data.createdAtFriendly=M(e.data.createdAt),e.data.updatedAtFriendly=M(e.data.updatedAt),t(e)})).catch((function(t){n(t)}))}))}},J={notes:null,curNoteId:null},V={notes:function(t){return t.notes||[]},curNote:function(t){return Array.isArray(t.notes)&&t.notes!==[]?t.curNoteId?t.notes.find((function(e){return e.id.toString()===t.curNoteId}))||{}:t.notes[0]||{}:{}}},K={setNotes:function(t,e){t.notes=e.notes},setCurNote:function(t,e){t.curNoteId=e.curNoteId},addNote:function(t,e){t.notes.unshift(e.note)},updateNote:function(t,e){var n=t.notes.find((function(t){return t.id===e.noteId}))||{};n.title=e.title,n.content=e.content},deleteNote:function(t,e){t.notes=t.notes.filter((function(t){return t.id!==e.noteId}))}},z={getNotes:function(t,e){var n=t.commit,o=e.notebookId;return q.getAll({notebookId:o}).then((function(t){n("setNotes",{notes:t.data})}))},addNote:function(t,e){var n=t.commit,o=e.notebookId,a=e.title;return q.addNote({notebookId:o},{title:a}).then((function(t){n("addNote",{note:t.data}),r["Message"].success(t.msg)}))},updateNote:function(t,e){var n=t.commit,o=e.noteId,r=e.title,a=e.content;return q.updateNote({noteId:o},{title:r,content:a}).then((function(t){n("updateNote",{noteId:o,title:r,content:a})}))},deleteNote:function(t,e){var n=t.commit,o=e.noteId;return q.deleteNote({noteId:o}).then((function(t){r["Message"].success(t.msg),n("deleteNote",{noteId:o})}))}},Q={state:J,getters:V,mutations:K,actions:z},W={user:null},X={username:function(t){return t.user?t.user.username:"未登录"},slug:function(t){return t.user?t.user.username.charAt(0):"未"}},Y={setUser:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.user=e.user}},Z={login:function(t,e){var n=t.commit,o=e.username,r=e.password;v["a"].login({username:o,password:r}).then((function(t){n("setUser",{user:t.data})}))},register:function(t,e){var n=t.commit,o=e.username,r=e.password;v["a"].register({username:o,password:r}).then((function(t){n("setUser",{user:t.data})}))},checkLogin:function(t,e){var n=t.commit,o=e.path;return v["a"].getInfo().then((function(t){t.isLogin?n("setUser",{user:t.data}):L.replace(o)}))}},tt={state:W,getters:X,mutations:Y,actions:Z},et={GET:"/notes/trash",REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm"},nt={getAll:function(){return new Promise((function(t,e){Object(S["a"])(et.GET).then((function(e){e.data=e.data.sort((function(t,e){return t.createdAt<e.createdAt})),e.data.forEach((function(t){t.createdAtFriendly=M(t.createdAt),t.updatedAtFriendly=M(t.updatedAt)})),t(e)})).catch((function(t){e(t)}))}))},deleteNote:function(t){var e=t.noteId;return Object(S["a"])(et.DELETE.replace(":noteId",e),"DELETE")},revertNote:function(t){var e=t.noteId;return Object(S["a"])(et.REVERT.replace(":noteId",e),"PATCH")}},ot={trashNotes:null,curTrashNoteId:null},rt={trashNotes:function(t){return t.trashNotes||[]},curTrashNote:function(t,e){return t.curTrashNoteId?t.trashNotes.find((function(e){return e.id==t.curTrashNoteId}))||{}:e.trashNotes[0]||{}},belongTo:function(t,e,n,o){var r=o.notebooks.find((function(t){return t.id==e.curTrashNote.notebookId}))||{};return r.title||""}},at={setTrashNotes:function(t,e){t.trashNotes=e.trashNotes},addTrashNote:function(t,e){setTrashNotes.unshift(e.note)},deleteTrashNote:function(t,e){t.trashNotes=t.trashNotes.filter((function(t){return t.id!=e.noteId}))},setCurTrashNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.curTrashNoteId=e.curTrashNoteId}},ct={getTrashNotes:function(t){var e=t.commit;return nt.getAll().then((function(t){e("setTrashNotes",{trashNotes:t.data})}))},deleteTrashNote:function(t,e){var n=t.commit,o=e.noteId;return nt.deleteNote({noteId:o}).then((function(t){n("deleteTrashNote",{noteId:o}),r["Message"].success(t.msg)}))},revertTrashNote:function(t,e){var n=t.commit,o=e.noteId;return nt.revertNote({noteId:o}).then((function(t){n("deleteTrashNote",{noteId:o}),r["Message"].success(t.msg)}))}},ut={state:ot,getters:rt,mutations:at,actions:ct};o["default"].use(h["a"]);var st=new h["a"].Store({state:{},mutations:{},actions:{},modules:{notebook:$,note:Q,user:tt,trash:ut}});o["default"].use(a.a),o["default"].config.productionTip=!1,o["default"].component("Sidebar",E),new o["default"]({router:L,store:st,render:function(t){return t(y)}}).$mount("#app")},"85ec":function(t,e,n){},a1aa:function(t,e,n){"use strict";var o=n("05e3"),r=n.n(o);r.a}});
//# sourceMappingURL=app.d407ef1a.js.map